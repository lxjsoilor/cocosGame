require=function t(e,c,i){function o(s,a){if(!c[s]){if(!e[s]){var r="function"==typeof require&&require;if(!a&&r)return r(s,!0);if(n)return n(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var l=c[s]={exports:{}};e[s][0].call(l.exports,function(t){var c=e[s][1][t];return o(c||t)},l,l.exports,t,e,c,i)}return c[s].exports}for(var n="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({PHTJS:[function(t,e,c){"use strict";cc._RF.push(e,"22810UXZfpO3oz/AnR8+At8","PHTJS"),cc.Class({extends:cc.Component,properties:{is_debug:!1,gravity:cc.p(0,-320)},onLoad:function(){if(cc.director.getPhysicsManager().enabled=!0,this.is_debug){var t=cc.PhysicsManager.DrawBits;cc.director.getPhysicsManager().debugDrawFlags=t.e_jointBit|t.e_shapeBit}else cc.director.getPhysicsManager().debugDrawFlags=0;cc.director.getPhysicsManager().gravity=this.gravity}}),cc._RF.pop()},{}],baseView:[function(t,e,c){"use strict";cc._RF.push(e,"280c3rsZJJKnZ9RqbALVwtK","baseView"),cc.Class({extends:cc.Component,properties:{mHero:{type:cc.Node,default:null},rollBtn:{type:cc.Node,default:null},backImg:[cc.Node],backImg2:cc.Node,backImg3:cc.Node,backImg4:cc.Node,continJump:continJump,floor:cc.Node,floorBoard:cc.Prefab,boardLeft:cc.Prefab,boardCenter:cc.Prefab,boardRight:cc.Prefab,gameOverBtn:cc.Node,canProduce:!0},start:function(){var t=this;this.isRun=!0,this.isRoll=!1,this.isJump=!1,this.mHeroAnim=this.mHero.getComponent(cc.Animation),this.rollBtn.on(cc.Node.EventType.TOUCH_START,function(){t.isRoll=!0,t.isJump||(t.mHero.stopAllActions(),t.mHeroAnim.play("roll"))},this),this.rollBtn.on(cc.Node.EventType.TOUCH_END,function(){t.isRoll=!1,!t.isJump&&CANROLL&&(t.mHero.stopAllActions(),t.mHeroAnim.play("run"))}),this.rollBtn.on(cc.Node.EventType.TOUCH_CANCEL,function(){t.isRoll=!1,t.isJump||(t.mHero.stopAllActions(),t.mHeroAnim.play("run"))}),this.backImgMove(this.backImg[0],30,-500,0,0),this.backImgMove(this.backImg2,20,-750,0,566),this.backImgMove(this.backImg3,10,-500,0,0),this.backImgMove(this.backImg4,6,-500,0,0),this.heroRigidBody=this.mHero.getComponent(cc.RigidBody),this.randomFloor(-900)},backImgMove:function(t,e,c,i,o){var n=this;t.resumeAllActions();var s=cc.moveTo(e,cc.p(c,i)),a=cc.callFunc(function(){t.setPosition(cc.p(o,i)),n.backImgMove(t,e,c,i,o)}),r=cc.sequence([s,a]);t.runAction(r)},update:function(t){this.isRoll&&"run"==this.mHeroAnim.currentClip._name?(this.mHero.stopAllActions(),this.mHeroAnim.play("roll")):this.mHeroAnim.currentClip&&"roll"==this.mHeroAnim.currentClip._name&&!this.isRoll&&(this.mHero.stopAllActions(),this.mHeroAnim.play("run"));var e=this.heroRigidBody.linearVelocity.y;if(this.heroRigidBody.linearVelocity=cc.p(0,e),ISDIE&&this.gameOver(this.floor.children),this.floor.children[4].x+this.floor.children[4].width<300&&this.canProduce&&(this.canProduce=!1,console.log(this.floor.children),this.randomFloor(200)),this.floor.children[4].x+this.floor.children[4].width<-400&&!this.canProduce){this.canProduce=!0;for(var c=0;c<5;c++)this.floor.removeChild(this.floor.children[0]);console.log(this.floor.children)}},gameOver:function(t){t.forEach(function(t){t.getComponent(cc.RigidBody).linearVelocity=cc.p(0,0)},this),this.gameOverBtn.active=!0,this.backImg[0].pauseAllActions(),this.backImg2.pauseAllActions(),this.backImg3.pauseAllActions(),this.backImg4.pauseAllActions()},onGameItem:function(){cc.director.loadScene("RoomScene")},onAnimationChange:function(t,e){var c=this;if(!ISDIE&&"jump"==e&&this.continJump>=1){this.mHero.stopAllActions(),this.mHeroAnim.play(e),this.continJump--,this.isJump=!0;var i=cc.moveBy(.4,cc.p(0,120)).easing(cc.easeCubicActionOut()),o=cc.callFunc(function(){c.isJump=!1,c.continJump=2}),n=cc.sequence([i,o]);this.mHero.runAction(n)}},randomFloor:function(t){for(var e=0,c=0;c<5;c++){var i=Math.ceil(6*Math.random()),o=i-e;e=i;var n=cc.instantiate(this.floorBoard),s=51+120*i+75;t+=51+120*i+75-120*o;var a=cc.instantiate(this.boardLeft);n.addChild(a);for(var r=0;r<i;r++){var h=cc.instantiate(this.boardCenter);n.addChild(h)}var l=cc.instantiate(this.boardRight);n.addChild(l);var u=n.getComponent(cc.PhysicsBoxCollider);switch(i){case 1:u.offset.x=120;break;case 2:u.offset.x=180;break;case 3:u.offset.x=240;break;case 4:u.offset.x=300;break;case 5:u.offset.x=360;break;case 6:u.offset.x=420}u.size.width=s,t+=Math.floor(160*Math.random()+20),n.x=t,n.y=-Math.floor(150*Math.random()+50),this.floor.addChild(n)}this.floor.children.forEach(function(t){t.getComponent(cc.RigidBody).linearVelocity=cc.p(-200,0)},this),console.log(this.floor.children[4]),this.gameOverBtn.active=!1,ISDIE=!1}}),cc._RF.pop()},{}],hero:[function(t,e,c){"use strict";cc._RF.push(e,"bec86haqOhCZaBgQbFrJLqx","hero"),cc.Class({extends:cc.Component,properties:{},start:function(){},onBeginContact:function(t,e,c){CANROLL=!0,this.node.getComponent(cc.Animation).play("run"),console.log(c.node._name),"dieLine"==c.node._name&&(ISDIE=!0)},onEndContact:function(){CANROLL=!1}}),cc._RF.pop()},{}],playerItem:[function(t,e,c){"use strict";cc._RF.push(e,"2f3e9bH3B9PeZvqMRU5XCIq","playerItem"),cc.Class({extends:cc.Component,properties:{heroArr:[cc.Prefab],heroButton:cc.Node,INDEX:0},onLoad:function(){this.buyBtn=this.heroButton.getChildByName("buyBtn"),this.sureBtn=this.heroButton.getChildByName("sureBtn"),this.activeGet=this.heroButton.getChildByName("activeGet")},loadHero:function(t){this.INDEX=t,this.buyBtn=this.heroButton.getChildByName("buyBtn"),this.sureBtn=this.heroButton.getChildByName("sureBtn"),this.activeGet=this.heroButton.getChildByName("activeGet");var e=cc.instantiate(this.heroArr[t]);switch(this.node.getChildByName("hero").addChild(e),t){case 0:this.buyBtn.active=!1,this.sureBtn.active=!0,this.activeGet.active=!1;break;case 1:this.buyBtn.active=!0,this.sureBtn.active=!1,this.activeGet.active=!1;break;case 2:this.buyBtn.active=!1,this.sureBtn.active=!1,this.activeGet.active=!0;break;case 3:this.buyBtn.active=!0,this.sureBtn.active=!1,this.activeGet.active=!1}},start:function(){},buyByMoney:function(){if(MONEY<200){var t=new cc.Event.EventCustom("showPop",!0);return t.detail={text:"金币不足"},void this.node.dispatchEvent(t)}MONEY-=200,this.buyBtn.active=!1,this.sureBtn.active=!0},buyByJewel:function(){if(JEWEL<1e3){var t=new cc.Event.EventCustom("showPop",!0);return t.detail={text:"钻石不足"},void this.node.dispatchEvent(t)}JEWEL-=1e3,this.buyBtn.active=!1,this.sureBtn.active=!0},checkThis:function(){var t=new cc.Event.EventCustom("checkThis",!0);t.detail={pre:this.heroArr[this.INDEX]},this.node.dispatchEvent(t)}}),cc._RF.pop()},{}],room:[function(t,e,c){"use strict";cc._RF.push(e,"6896d7cut1GPK/IGyH7b+Sg","room"),cc.Class({extends:cc.Component,properties:{continJump:continJump,gameItemBox:cc.Node,gameItem:[cc.Node],playItem:cc.Node,checkPlayer:cc.Node,playItemPrefab:cc.Prefab,scrollContent:cc.Node,playImg:cc.Node,messagePop:cc.Node,moneyNum:cc.Label,jewelNum:cc.Label},onLoad:function(){var t=this;this.checkPlayer.active=!1,this.gameItemBox.setPosition(cc.p(0,0)),this.loadHero(),this.node.on("checkThis",function(e){var c=e.detail.pre;t.onGameItemIn(c)}),this.node.on("showPop",function(e){t.showPop(e.detail.text)}),this.moneyNum.string=MONEY,this.jewelNum.string=JEWEL},start:function(){},addMoney:function(){MONEY+=100,this.moneyNum.string=MONEY},addJewel:function(){JEWEL+=100,this.jewelNum.string=JEWEL},loadHero:function(){for(var t=0;t<4;t++){var e=cc.instantiate(this.playItemPrefab);e.getComponent("playerItem").loadHero(t),this.scrollContent.addChild(e)}},onGameItem:function(){cc.director.loadScene("GameScene")},onGameItemOut:function(){var t=this;this.gameItem.forEach(function(t,e){var c=cc.delayTime(.05*e),i=cc.moveTo(.2,cc.p(400,t.y)),o=cc.sequence([c,i]);t.runAction(o)},this);var e=cc.moveTo(.2,cc.p(0,this.playItem.y)),c=cc.fadeOut(.2),i=cc.callFunc(function(){t.playItem.active=!1,t.checkPlayer.active=!0}),o=cc.sequence([c,i]);this.playItem.runAction(e),this.playItem.runAction(o)},onGameItemIn:function(t){this.gameItem.forEach(function(t,e){var c=cc.delayTime(.1*e),i=cc.moveTo(.2,cc.p(145,t.y)),o=cc.sequence([c,i]);t.runAction(o)},this),this.playItem.active=!0;var e=cc.moveTo(.2,cc.p(-142,this.playItem.y)),c=cc.fadeIn(.2);if(this.playItem.runAction(e),this.playItem.runAction(c),this.checkPlayer.active=!1,"touchend"!=t.type){var i=cc.instantiate(t);this.playImg.removeAllChildren(),this.playImg.addChild(i)}},hidePop:function(){var t=cc.scaleTo(.1,.1),e=cc.fadeOut(.05);this.messagePop.runAction(t),this.messagePop.runAction(e)},showPop:function(t){"touchend"==t.type&&(t="暂未开放"),this.messagePop.active=!0,this.messagePop.getChildByName("text").getComponent(cc.Label).string=t;var e=cc.scaleTo(.1,.5),c=cc.fadeIn(.05);this.messagePop.runAction(e),this.messagePop.runAction(c)},update:function(t){this.moneyNum.string=MONEY,this.jewelNum.string=JEWEL}}),cc._RF.pop()},{}]},{},["playerItem","PHTJS","baseView","hero","room"]);